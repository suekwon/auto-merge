
# This is a basic workflow to help you get started with Actions

name: auto merge PR 

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  auto-merge:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # 1. branch check
      - name: Check branch 
        if: github.head_ref != 'work'
        run: |
          echo "PR is not from the 'work' branch. Skipping auto-merge"
          exit 1

      # 2. 코드 체크아웃 (저장소 코드를 가상 환경으로 내려받기)
      - name: Checkout code
        uses: actions/checkout@v4

      # 3. Python 환경 설정
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.x' # 최신 3.x 버전의 파이썬 사용

      # 4. 테스트 실행 (CI 파트)
      # unittest를 사용해 test_calculator.py를 실행
      - name: Run tests
        run: python -m unittest test_calculator.py
